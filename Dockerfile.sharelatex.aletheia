# Partiamo dall'immagine ufficiale
FROM sharelatex/sharelatex:latest

# ==============================================================================
# ‚ö†Ô∏è FIX TEMPORANEO PER VERSIONE 5.x "BUCATA" ‚ö†Ô∏è
#
# Rimuoviamo lo script di migrazione `900_run_web_migrations.sh`.
# Nelle versioni 5.x attuali, questo script √® buggato: su installazioni pulite
# cerca di migrare dati che non esistono e manda il container in crash loop.
#
# NOTA: Quando uscir√† ShareLaTeX v6.0 (o una patch ufficiale), provare a
# rimuovere questa riga per vedere se il problema √® stato risolto.
# ==============================================================================
RUN rm -f /etc/my_init.d/900_run_web_migrations.sh

# ==============================================================================
# üì¶ INSTALLAZIONE COMPLETA LATEX (SCHEME-FULL)
#
# Scarica e installa TUTTI i pacchetti LaTeX esistenti (~4-5 GB).
# Questo evita errori "Package not found" per gli utenti.
# ATTENZIONE: La build impiegher√† molto tempo (15-30 min).
# ==============================================================================
RUN tlmgr update --self && \
    tlmgr install scheme-full && \
    tlmgr path add